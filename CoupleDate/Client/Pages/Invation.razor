@page "/invitation"
@inject IDialogService DialogService
@inject IInvitationService InvitationService

<MudAppBar Class="d-flex justify-content-center align-items-center">
    <MudText>
        Invitation Settings
    </MudText>
</MudAppBar>

<MudContainer MaxWidth="MaxWidth.Medium" Class="mt-4">
    <MudNavMenu>
        <MudNavLink OnClick="OpenInvitePartnerDialog"
                    Class="mud-nav-link-custom"
                    ActiveClass="mud-nav-link-custom-active">Invite Your Partner</MudNavLink>
        <MudNavLink OnClick="OpenExitCoupleDialog"
                    Class="mud-nav-link-custom"
                    ActiveClass="mud-nav-link-custom-active">Exit Couple</MudNavLink>
    </MudNavMenu>
</MudContainer>

@code {
    private async Task OpenInvitePartnerDialog()
    {
        var result = await InvitationService.GenerateInvitationLinkAsync();
        if (result.Success)
        {
            var options = new DialogOptions { CloseOnEscapeKey = true };
            DialogService.Show<ShareDialog>("Share Invitation Link", new DialogParameters { { "invitationLink", result.Data } }, options);
        }
    }

    private async Task OpenExitCoupleDialog()
    {
        var options = new DialogOptions { CloseOnEscapeKey = true };
        DialogService.Show<LeaveCoupleDialog>("Exit Couple", options);
    }
}
